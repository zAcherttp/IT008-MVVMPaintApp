<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MVVMPaintApp.Views"
        xmlns:uc="clr-namespace:MVVMPaintApp.UserControls"
        xmlns:controls="clr-namespace:System.Windows.Controls;assembly=PresentationFramework"
        x:Class="MVVMPaintApp.Views.MainCanvasWindow"
        xmlns:conv="clr-namespace:MVVMPaintApp.Converters"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        mc:Ignorable="d"
        Closing="MainCanvasWindow_Closing"
        PreviewKeyUp="MainCanvasWindow_PreviewKeyUp"
        PreviewKeyDown="MainCanvasWindow_PreviewKeyDown"
        Title="{Binding WindowTitle}" Height="{Binding WindowHeight, Mode=TwoWay}" Width="{Binding WindowWidth, Mode=TwoWay}">
    <Window.Resources>
        <conv:ZoomValueConverter x:Key="ZoomValueConverter"/>
        <DrawingImage x:Key="CursorIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V32 H32 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M32,32z M0,0z M9,4.55266L9,27.153 14.4837,19.6451C15.2369,18.614,16.4369,18.0044,17.7136,18.0044L26.2127,18.0044 9,4.55266z M7,3.4862C7,2.25279,8.4195,1.56026,9.39118,2.31963L28.3824,17.1612C29.574,18.0925,28.9156,20.0049,27.4035,20.0049L17.7136,20.0049C17.0752,20.0049,16.4752,20.3097,16.0987,20.8253L9.87386,29.3478C8.96648,30.5901,7,29.9481,7,28.4096L7,3.4862z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="SelectionIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M14,3.75A0.75,0.75,0,0,1,13.25,4.5L10.75,4.5A0.75,0.75,0,0,1,10.75,3L13.25,3A0.75,0.75,0,0,1,14,3.75z M4.5,10.75A0.75,0.75,0,0,0,3,10.75L3,13.25A0.75,0.75,0,0,0,4.5,13.25L4.5,10.75z M19.5,10.75A0.75,0.75,0,0,1,21,10.75L21,13.25A0.75,0.75,0,0,1,19.5,13.25L19.5,10.75z M13.25,21A0.75,0.75,0,0,0,13.25,19.5L10.75,19.5A0.75,0.75,0,0,0,10.75,21L13.25,21z M7,3.75A0.75,0.75,0,0,0,6.25,3L5.75,3A2.75,2.75,0,0,0,3,5.75L3,6.25A0.75,0.75,0,0,0,4.5,6.25L4.5,5.75C4.5,5.06,5.06,4.5,5.75,4.5L6.25,4.5A0.75,0.75,0,0,0,7,3.75z M17.75,3A0.75,0.75,0,0,0,17.75,4.5L18.25,4.5C18.94,4.5,19.5,5.06,19.5,5.75L19.5,6.25A0.75,0.75,0,0,0,21,6.25L21,5.75A2.75,2.75,0,0,0,18.25,3L17.75,3z M7,20.25A0.75,0.75,0,0,1,6.25,21L5.75,21A2.75,2.75,0,0,1,3,18.25L3,17.75A0.75,0.75,0,0,1,4.5,17.75L4.5,18.25C4.5,18.94,5.06,19.5,5.75,19.5L6.25,19.5A0.75,0.75,0,0,1,7,20.25z M17.75,21A0.75,0.75,0,0,1,17.75,19.5L18.25,19.5C18.94,19.5,19.5,18.94,19.5,18.25L19.5,17.75A0.75,0.75,0,0,1,21,17.75L21,18.25A2.75,2.75,0,0,1,18.25,21L17.75,21z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="CanvasSizeIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M3,6A3,3,0,0,1,6,3L18,3A3,3,0,0,1,21,6L21,18A3,3,0,0,1,18,21L6,21A3,3,0,0,1,3,18L3,6z M6,5A1,1,0,0,0,5,6L5,18A1,1,0,0,0,6,19L18,19A1,1,0,0,0,19,18L19,6A1,1,0,0,0,18,5L6,5z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="FitToWindowIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M18.25,4A3.75,3.75,0,0,1,22,7.75L22,16.25A3.75,3.75,0,0,1,18.25,20L5.75,20A3.75,3.75,0,0,1,2,16.25L2,7.75A3.75,3.75,0,0,1,5.75,4L18.25,4z M18.25,5.5L5.75,5.5A2.25,2.25,0,0,0,3.5,7.75L3.5,16.25A2.25,2.25,0,0,0,5.75,18.5L18.25,18.5A2.25,2.25,0,0,0,20.5,16.25L20.5,7.75A2.25,2.25,0,0,0,18.25,5.5z M18.25,13A0.75,0.75,0,0,1,19,13.75L19,15A2,2,0,0,1,17,17L15.75,17A0.75,0.75,0,0,1,15.75,15.5L17,15.5A0.5,0.5,0,0,0,17.5,15L17.5,13.75A0.75,0.75,0,0,1,18.25,13z M5.75,13A0.75,0.75,0,0,1,6.5,13.75L6.5,15A0.5,0.5,0,0,0,7,15.5L8.25,15.5A0.75,0.75,0,0,1,8.25,17L7,17A2,2,0,0,1,5,15L5,13.75A0.75,0.75,0,0,1,5.75,13z M7,7L8.25,7A0.75,0.75,0,0,1,8.352,8.493L8.25,8.5 7,8.5A0.5,0.5,0,0,0,6.508,8.91L6.5,9 6.5,10.25A0.75,0.75,0,0,1,5.007,10.352L5,10.25 5,9A2,2,0,0,1,6.85,7.005L7,7z M17,7A2,2,0,0,1,19,9L19,10.25A0.75,0.75,0,0,1,17.5,10.25L17.5,9A0.5,0.5,0,0,0,17,8.5L15.75,8.5A0.75,0.75,0,0,1,15.75,7L17,7z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="NewIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M18.5,20A0.5,0.5,0,0,1,18,20.5L6,20.5A0.5,0.5,0,0,1,5.5,20L5.5,4A0.5,0.5,0,0,1,6,3.5L12,3.5 12,8A2,2,0,0,0,14,10L18.5,10 18.5,20z M13.5,4.621L17.378,8.5 14,8.5A0.5,0.5,0,0,1,13.5,8L13.5,4.621z M19.414,8.414L13.585,2.586C13.559,2.56,13.527,2.54,13.5,2.516A2.072,2.072,0,0,0,13.281,2.336C13.241,2.309 13.195,2.291 13.153,2.268 13.082,2.228 13.012,2.184 12.937,2.152A1.977,1.977,0,0,0,12.313,2.014C12.266,2.011,12.22,2,12.172,2L6,2A2,2,0,0,0,4,4L4,20A2,2,0,0,0,6,22L18,22A2,2,0,0,0,20,20L20,9.828A2,2,0,0,0,19.414,8.414z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="OpenIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M20,9.502L20,8.75A2.25,2.25,0,0,0,17.75,6.5L12.025,6.5 9.645,4.52A2.25,2.25,0,0,0,8.204,4L4.25,4A2.25,2.25,0,0,0,2,6.25L1.996,17.75A2.25,2.25,0,0,0,4.246,20L18.47,20A1.75,1.75,0,0,0,20.168,18.675L21.918,11.677A1.75,1.75,0,0,0,20.22,9.502L20,9.502z M4.25,5.5L8.206,5.5A0.75,0.75,0,0,1,8.686,5.673L11.274,7.827A0.75,0.75,0,0,0,11.754,8L17.75,8A0.75,0.75,0,0,1,18.5,8.75L18.5,9.502 6.424,9.502A2.25,2.25,0,0,0,4.241,11.206L3.497,14.184 3.5,6.25A0.75,0.75,0,0,1,4.25,5.5z M5.697,11.57A0.75,0.75,0,0,1,6.424,11.002L20.22,11.002A0.25,0.25,0,0,1,20.462,11.312L18.712,18.311A0.25,0.25,0,0,1,18.47,18.5L4.285,18.5A0.25,0.25,0,0,1,4.042,18.19L5.697,11.57z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="SaveIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M3,5.75A2.75,2.75,0,0,1,5.75,3L15.714,3A3.25,3.25,0,0,1,18.013,3.952L20.048,5.987C20.658,6.597,21,7.424,21,8.286L21,18.25A2.75,2.75,0,0,1,18.25,21L5.75,21A2.75,2.75,0,0,1,3,18.25L3,5.75z M5.75,4.5C5.06,4.5,4.5,5.06,4.5,5.75L4.5,18.25C4.5,18.94,5.06,19.5,5.75,19.5L6,19.5 6,14.25A2.25,2.25,0,0,1,8.25,12L15.75,12A2.25,2.25,0,0,1,18,14.25L18,19.5 18.25,19.5C18.94,19.5,19.5,18.94,19.5,18.25L19.5,8.286C19.5,7.821,19.316,7.376,18.987,7.048L16.952,5.013A1.75,1.75,0,0,0,16,4.523L16,7.25A2.25,2.25,0,0,1,13.75,9.5L9.25,9.5A2.25,2.25,0,0,1,7,7.25L7,4.5 5.75,4.5z M16.5,19.5L16.5,14.25A0.75,0.75,0,0,0,15.75,13.5L8.25,13.5A0.75,0.75,0,0,0,7.5,14.25L7.5,19.5 16.5,19.5z M8.5,4.5L8.5,7.25C8.5,7.664,8.836,8,9.25,8L13.75,8A0.75,0.75,0,0,0,14.5,7.25L14.5,4.5 8.5,4.5z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="SaveAsIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M5.75,3A2.75,2.75,0,0,0,3,5.75L3,18.25A2.75,2.75,0,0,0,5.75,21L9.999,21A2.112,2.112,0,0,1,10.061,20.407L10.288,19.5 7.5,19.5 7.5,14.25A0.75,0.75,0,0,1,8.25,13.5L14.853,13.5 16.288,12.065A2.258,2.258,0,0,0,15.75,12L8.25,12A2.25,2.25,0,0,0,6,14.25L6,19.5 5.75,19.5C5.06,19.5,4.5,18.94,4.5,18.25L4.5,5.75C4.5,5.06,5.06,4.5,5.75,4.5L7,4.5 7,7.25A2.25,2.25,0,0,0,9.25,9.5L13.75,9.5A2.25,2.25,0,0,0,16,7.25L16,4.523C16.358,4.583,16.692,4.753,16.952,5.013L18.987,7.048C19.316,7.376,19.5,7.821,19.5,8.286L19.5,10.007C19.57,10.002,19.642,10,19.713,10L19.715,10C20.152,10,20.59,10.087,21,10.261L21,8.287A3.25,3.25,0,0,0,20.048,5.988L18.013,3.953A3.25,3.25,0,0,0,15.714,3L5.75,3z M8.5,7.25L8.5,4.5 14.5,4.5 14.5,7.25A0.75,0.75,0,0,1,13.75,8L9.25,8A0.75,0.75,0,0,1,8.5,7.25z" />
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M19.715,11L19.713,11C19.128,11,18.543,11.223,18.098,11.67L12.196,17.572A2.684,2.684,0,0,0,11.489,18.819L11.031,20.65A1.087,1.087,0,0,0,12.35,21.968L14.18,21.511A2.684,2.684,0,0,0,15.428,20.804L21.33,14.902A2.285,2.285,0,0,0,19.715,11z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="RedoIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M19.25,2A0.75,0.75,0,0,0,18.507,2.648L18.5,2.75 18.5,8.44 13.926,3.88A6.41,6.41,0,0,0,5.048,3.701L4.862,3.881A6.41,6.41,0,0,0,4.862,12.944L13.707,21.784A0.75,0.75,0,0,0,14.767,20.722L5.922,11.884A4.91,4.91,0,0,1,12.688,4.772L12.866,4.942 17.438,9.5 11.75,9.5A0.75,0.75,0,0,0,11.007,10.148L11,10.25C11,10.63,11.282,10.944,11.648,10.993L11.75,11 19.25,11A0.75,0.75,0,0,0,19.993,10.352L20,10.25 20,2.75A0.75,0.75,0,0,0,19.25,2z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="UndoIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M4.75,2A0.75,0.75,0,0,1,5.493,2.648L5.5,2.75 5.5,8.44 10.074,3.88A6.41,6.41,0,0,1,18.953,3.701L19.139,3.881A6.41,6.41,0,0,1,19.139,12.944L10.293,21.784A0.75,0.75,0,0,1,9.233,20.722L18.078,11.884A4.91,4.91,0,0,0,11.312,4.772L11.134,4.942 6.562,9.5 12.25,9.5A0.75,0.75,0,0,1,12.993,10.148L13,10.25A0.75,0.75,0,0,1,12.352,10.993L12.25,11 4.75,11A0.75,0.75,0,0,1,4.007,10.352L4,10.25 4,2.75A0.75,0.75,0,0,1,4.75,2z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="ZoomInIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M12.75,9.25A0.75,0.75,0,0,1,12.75,10.75L7.25,10.75A0.75,0.75,0,0,1,7.25,9.25L12.75,9.25z" />
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M17.25,10A7.25,7.25,0,1,0,14.569,15.63L19.469,20.53 19.554,20.603A0.75,0.75,0,0,0,20.53,19.47L15.63,14.569A7.22,7.22,0,0,0,17.25,10z M4.25,10A5.75,5.75,0,1,1,15.75,10A5.75,5.75,0,0,1,4.25,10z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="ZoomOutIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M13.5,10A0.75,0.75,0,0,0,12.75,9.25L10.75,9.25 10.75,7.25A0.75,0.75,0,0,0,9.25,7.25L9.25,9.25 7.25,9.25A0.75,0.75,0,1,0,7.25,10.75L9.25,10.75 9.25,12.75A0.75,0.75,0,0,0,10.75,12.75L10.75,10.75 12.75,10.75A0.75,0.75,0,0,0,13.5,10z" />
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M10,2.75A7.25,7.25,0,0,1,15.63,14.569L20.53,19.469A0.75,0.75,0,0,1,19.554,20.603L19.47,20.53 14.569,15.63A7.25,7.25,0,1,1,10,2.75z M10,4.25A5.75,5.75,0,1,0,10,15.75A5.75,5.75,0,0,0,10,4.25z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="ExitIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M4.397,4.554L4.47,4.47A0.75,0.75,0,0,1,5.446,4.397L5.53,4.47 12,10.939 18.47,4.469A0.75,0.75,0,1,1,19.53,5.53L13.061,12 19.531,18.47A0.75,0.75,0,0,1,19.603,19.446L19.53,19.53A0.75,0.75,0,0,1,18.554,19.603L18.47,19.53 12,13.061 5.53,19.531A0.75,0.75,0,0,1,4.47,18.47L10.939,12 4.469,5.53A0.75,0.75,0,0,1,4.397,4.554L4.47,4.47 4.397,4.554z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="CutIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M12.1409,9.3415L12.14,9.34286 7.37017,2.3284C7.13725,1.98587 6.67077,1.89702 6.32824,2.12994 5.98572,2.36286 5.89687,2.82934 6.12978,3.17187L11.2606,10.7171 8.86478,14.4605C8.30797,14.1665 7.67342,14.0001 7,14.0001 4.79086,14.0001 3,15.791 3,18.0001 3,20.2093 4.79086,22.0001 7,22.0001 9.20914,22.0001 11,20.2093 11,18.0001 11,17.0089 10.6395,16.1019 10.0424,15.4031L12.178,12.0662 14.2426,15.1024C13.4771,15.831 13,16.8599 13,18.0001 13,20.2093 14.7909,22.0001 17,22.0001 19.2091,22.0001 21,20.2093 21,18.0001 21,15.791 19.2091,14.0001 17,14.0001 16.471,14.0001 15.9659,14.1028 15.5037,14.2894L13.0575,10.692 13.0588,10.69 12.1409,9.3415z M4.5,18.0001C4.5,16.6194 5.61929,15.5001 7,15.5001 8.38071,15.5001 9.5,16.6194 9.5,18.0001 9.5,19.3808 8.38071,20.5001 7,20.5001 5.61929,20.5001 4.5,19.3808 4.5,18.0001z M14.5,18.0001C14.5,16.6194 15.6193,15.5001 17,15.5001 18.3807,15.5001 19.5,16.6194 19.5,18.0001 19.5,19.3808 18.3807,20.5001 17,20.5001 15.6193,20.5001 14.5,19.3808 14.5,18.0001z M13.9381,9.31607L17.8815,3.15438C18.1048,2.8055 18.003,2.34167 17.6541,2.11839 17.3053,1.89511 16.8414,1.99692 16.6181,2.3458L13.0202,7.96756 13.9381,9.31607z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="CopyIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V32 H32 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M32,32z M0,0z M11.75,2C9.95507,2,8.5,3.45508,8.5,5.25L8.5,23.25C8.5,25.0449,9.95507,26.5,11.75,26.5L23.75,26.5C25.5449,26.5,27,25.0449,27,23.25L27,5.25C27,3.45507,25.5449,2,23.75,2L11.75,2z M10.5,5.25C10.5,4.55964,11.0596,4,11.75,4L23.75,4C24.4404,4,25,4.55964,25,5.25L25,23.25C25,23.9404,24.4404,24.5,23.75,24.5L11.75,24.5C11.0596,24.5,10.5,23.9404,10.5,23.25L10.5,5.25z M7,5.74902C5.82552,6.2388,5,7.39797,5,8.74994L5,23.4999C5,27.0898,7.91015,29.9999,11.5,29.9999L20.25,29.9999C21.6021,29.9999,22.7613,29.1743,23.2511,27.9996L20.2786,27.9996C20.2691,27.9998,20.2596,27.9999,20.25,27.9999L11.5,27.9999C9.01472,27.9999,7,25.9852,7,23.4999L7,5.74902z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="PasteIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V32 H32 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M32,32z M0,0z M7.5,6L9.17071,6C9.58254,7.16519,10.6938,8,12,8L18,8C19.3062,8,20.4175,7.16519,20.8293,6L22.5,6C23.3284,6 24,6.67157 24,7.5 24,8.05228 24.4477,8.5 25,8.5 25.5523,8.5 26,8.05228 26,7.5 26,5.567 24.433,4 22.5,4L20.8293,4C20.4175,2.83481,19.3062,2,18,2L12,2C10.6938,2,9.58254,2.83481,9.17071,4L7.5,4C5.567,4,4,5.567,4,7.5L4,26.5C4,28.433,5.567,30,7.5,30L12,30C12.5523,30 13,29.5523 13,29 13,28.4477 12.5523,28 12,28L7.5,28C6.67157,28,6,27.3284,6,26.5L6,7.5C6,6.67157,6.67157,6,7.5,6z M12,4L18,4C18.5523,4 19,4.44772 19,5 19,5.55228 18.5523,6 18,6L12,6C11.4477,6 11,5.55228 11,5 11,4.44772 11.4477,4 12,4z M17.5,10C15.567,10,14,11.567,14,13.5L14,26.5C14,28.433,15.567,30,17.5,30L25.5,30C27.433,30,29,28.433,29,26.5L29,13.5C29,11.567,27.433,10,25.5,10L17.5,10z M16,13.5C16,12.6716,16.6716,12,17.5,12L25.5,12C26.3284,12,27,12.6716,27,13.5L27,26.5C27,27.3284,26.3284,28,25.5,28L17.5,28C16.6716,28,16,27.3284,16,26.5L16,13.5z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="CropIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V48 H48 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M48,48z M0,0z M14,5.25C14,4.55964 13.4404,4 12.75,4 12.0596,4 11.5,4.55964 11.5,5.25L11.5,11.5 5.25,11.5C4.55964,11.5 4,12.0596 4,12.75 4,13.4404 4.55964,14 5.25,14L11.5,14 11.5,30.25C11.5,33.7018,14.2982,36.5,17.75,36.5L34,36.5 34,42.75C34,43.4404 34.5596,44 35.25,44 35.9404,44 36.5,43.4404 36.5,42.75L36.5,36.5 42.75,36.5C43.4404,36.5 44,35.9404 44,35.25 44,34.5596 43.4404,34 42.75,34L17.75,34C15.6789,34,14,32.3211,14,30.25L14,5.25z M34,17.75L34,32 36.5,32 36.5,17.75C36.5,14.2982,33.7018,11.5,30.25,11.5L16,11.5 16,14 30.25,14C32.3211,14,34,15.6789,34,17.75z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="ResizeIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M11,2.75C11,2.33579,10.6642,2,10.25,2L5.25,2C3.45507,2,2,3.45507,2,5.25L2,10.25C2,10.6642 2.33579,11 2.75,11 3.16421,11 3.5,10.6642 3.5,10.25L3.5,5.25C3.5,4.2835,4.2835,3.5,5.25,3.5L10.25,3.5C10.6642,3.5,11,3.16421,11,2.75z M13.75,2C13.3358,2 13,2.33579 13,2.75 13,3.16421 13.3358,3.5 13.75,3.5L18.75,3.5C19.7165,3.5,20.5,4.2835,20.5,5.25L20.5,10.25C20.5,10.6642 20.8358,11 21.25,11 21.6642,11 22,10.6642 22,10.25L22,5.25C22,3.45507,20.5449,2,18.75,2L13.75,2z M13.75,22C13.3358,22 13,21.6642 13,21.25 13,20.8358 13.3358,20.5 13.75,20.5L18.75,20.5C19.7165,20.5,20.5,19.7165,20.5,18.75L20.5,13.75C20.5,13.3358 20.8358,13 21.25,13 21.6642,13 22,13.3358 22,13.75L22,18.75C22,20.5449,20.5449,22,18.75,22L13.75,22z M4,12C2.34315,12,1,13.3431,1,15L1,20C1,20.5564,1.15145,21.0773,1.41536,21.524L4.90901,18.0303C5.78769,17.1516,7.21231,17.1517,8.09099,18.0303L11.5846,21.524C11.8486,21.0773,12,20.5564,12,20L12,15C12,13.3431,10.6569,12,9,12L4,12z M4,23C3.44364,23,2.92266,22.8486,2.47602,22.5846L5.96967,19.091C6.26256,18.7981,6.73744,18.7981,7.03033,19.091L10.524,22.5846C10.0773,22.8486,9.55636,23,9,23L4,23z M9,16C8.44772,16 8,15.5523 8,15 8,14.4477 8.44772,14 9,14 9.55229,14 10,14.4477 10,15 10,15.5523 9.55229,16 9,16z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="FlipHorizontalIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V48 H48 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M48,48z M0,0z M39.4233,4.19676C39.7827,4.42645,40.0001,4.82351,40.0001,5.25L40.0001,20.75C40.0001,21.4404,39.4405,22,38.7501,22L5.25012,22C4.66332,22 4.15551,21.5918 4.02935,21.0187 3.9032,20.4456 4.19266,19.862 4.72523,19.6156L38.2252,4.11555C38.6123,3.93646,39.064,3.96708,39.4233,4.19676z M10.9285,19.5L37.5001,19.5 37.5001,7.20568 10.9285,19.5z M40.0003,43C40.0003,43.3423 39.8252,43.6609 39.5362,43.8443 39.2471,44.0278 38.8843,44.0506 38.5745,43.9048L4.57455,27.9048C4.15088,27.7054 3.92228,27.2388 4.02443,26.7818 4.12657,26.3249 4.53211,26 5.00034,26L39.0003,26C39.5526,26,40.0003,26.4477,40.0003,27L40.0003,43z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="FlipVerticalIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V48 H48 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M48,48z M0,0z M43.8032,39.4233C43.5735,39.7827,43.1765,40.0001,42.75,40.0001L27.25,40.0001C26.5596,40.0001,26,39.4405,26,38.7501L26,5.25012C26,4.66332 26.4082,4.15551 26.9813,4.02935 27.5544,3.9032 28.138,4.19266 28.3844,4.72523L43.8845,38.2252C44.0635,38.6123,44.0329,39.064,43.8032,39.4233z M28.5,10.9285L28.5,37.5001 40.7943,37.5001 28.5,10.9285z M5,40.0003C4.65766,40.0003 4.3391,39.8252 4.15567,39.5362 3.97223,39.2471 3.94941,38.8843 4.09518,38.5745L20.0952,4.57455C20.2946,4.15088 20.7612,3.92228 21.2182,4.02443 21.6751,4.12657 22,4.53211 22,5.00034L22,39.0003C22,39.5526,21.5523,40.0003,21,40.0003L5,40.0003z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="ClockwiseRotateIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M8.98489,5.00002C8.90135,5.00019 8.81821,5.00178 8.7355,5.00477 8.7297,5.00498 8.7239,5.0052 8.7181,5.00542 7.55763,5.05015 6.48324,5.36959 5.58643,5.88751 4.02356,6.79009 3,8.29543 3,10 3,11.7078 4.02751,13.2157 5.59546,14.1177 6.56274,14.6741 7.73571,15 9,15L9.5,15C9.81933,15 10.092,14.8004 10.2002,14.5192 10.2324,14.4357 10.25,14.3449 10.25,14.25 10.25,13.8358 9.91421,13.5 9.5,13.5L9,13.5C8.03665,13.5 7.14401,13.2646 6.412,12.8636 5.25554,12.2302 4.5,11.1837 4.5,10 4.5,8.81627 5.25554,7.76979 6.41201,7.13637 7.08679,6.76678 7.89807,6.53782 8.7754,6.50428L9,6.5 15.939,6.5 14.2197,8.21967C14.2193,8.21999 14.219,8.22032 14.2187,8.22064 13.9268,8.51361 13.9271,8.98776 14.2197,9.28033 14.4859,9.5466 14.9026,9.5708 15.1962,9.35295L15.2803,9.28033C15.2804,9.2803,15.2803,9.28037,15.2803,9.28033L15.2812,9.27945 18.2803,6.28033C18.2863,6.27432 18.2922,6.26823 18.298,6.26208 18.5616,5.98033 18.5672,5.54487 18.3149,5.25657 18.3038,5.24398 18.2923,5.23167 18.2803,5.21967L15.2813,2.22064C15.2811,2.22046 15.2815,2.22083 15.2813,2.22064 15.2812,2.2205 15.2805,2.21981 15.2803,2.21967L15.1962,2.14705C14.9026,1.9292 14.4859,1.9534 14.2197,2.21967 13.9271,2.51224 13.9268,2.98639 14.2187,3.27936 14.219,3.27968 14.2193,3.28001 14.2197,3.28033L15.938,5 9,5C8.99496,5,8.98992,5.00001,8.98489,5.00002z M3.61101,20.0673C3.37203,20.2056 3.29046,20.5115 3.42882,20.7505 3.51821,20.9049 3.68311,21 3.86153,21L20,21C20.5522,21,21,20.5523,21,20L21,10.8672C21,10.5911 20.7761,10.3672 20.5,10.3672 20.412,10.3672 20.3256,10.3904 20.2494,10.4345L3.61101,20.0673z M7.58467,19.5L19.5,12.6017 19.5,19.5 7.58467,19.5z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="CounterClockwiseRotateIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M15.0151,5.00002C15.0986,5.00019 15.1818,5.00178 15.2645,5.00477 15.2703,5.00498 15.2761,5.0052 15.2819,5.00542 16.4423,5.05015 17.5167,5.36959 18.4135,5.88751 19.9764,6.79009 21,8.29543 21,10 21,11.7078 19.9725,13.2157 18.4045,14.1177 17.4372,14.6741 16.2643,15 15,15L14.5,15C14.1806,15 13.9079,14.8004 13.7997,14.5192 13.7676,14.4357 13.75,14.3449 13.75,14.25 13.75,13.8358 14.0858,13.5 14.5,13.5L15,13.5C15.9633,13.5 16.856,13.2646 17.588,12.8636 18.7444,12.2302 19.5,11.1837 19.5,10 19.5,8.81627 18.7444,7.76979 17.588,7.13637 16.9132,6.76678 16.1019,6.53782 15.2246,6.50428L15,6.5 8.06097,6.5 9.78126,8.22064C10.0732,8.51361 10.0729,8.98776 9.7803,9.28033 9.51403,9.5466 9.09737,9.5708 8.80375,9.35295L8.71964,9.28033 8.71876,9.27945 5.71964,6.28033C5.71363,6.27432 5.70774,6.26823 5.70198,6.26208 5.43837,5.98033 5.43275,5.54487 5.6851,5.25657 5.69612,5.24398 5.70763,5.23167 5.71964,5.21967L8.71866,2.22064 8.71964,2.21967 8.80375,2.14705C9.09737,1.9292 9.51403,1.9534 9.7803,2.21967 10.0729,2.51224 10.0732,2.98639 9.78127,3.27936L8.06197,5 15,5C15.005,5,15.01,5.00001,15.0151,5.00002z M20.389,20.0673C20.6279,20.2056 20.7095,20.5115 20.5711,20.7505 20.4818,20.9049 20.3169,21 20.1384,21L4,21C3.44772,21,3,20.5523,3,20L3,10.8672C3,10.5911 3.22386,10.3672 3.5,10.3672 3.58797,10.3672 3.67439,10.3904 3.75052,10.4345L20.389,20.0673z M16.4153,19.5L4.5,12.6017 4.5,19.5 16.4153,19.5z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="LayersIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M20.026,12.192A2.002,2.002,0,0,1,19.449,12.79L13.399,16.874A2.5,2.5,0,0,1,10.601,16.874L4.551,12.79A2,2,0,0,1,3.772,10.5L10.613,15.06A2.5,2.5,0,0,0,13.226,15.158L13.386,15.06 20.227,10.5A1.996,1.996,0,0,1,20.026,12.192z M20.227,13.75A1.996,1.996,0,0,1,19.449,16.04L13.399,20.124A2.5,2.5,0,0,1,10.601,20.124L4.551,16.04A2,2,0,0,1,3.772,13.75L10.613,18.31A2.5,2.5,0,0,0,13.226,18.408L13.386,18.31 20.227,13.75z M13.387,3.425L19.752,7.668A1,1,0,0,1,19.752,9.332L13.387,13.576A2.5,2.5,0,0,1,10.613,13.576L4.248,9.332A1,1,0,0,1,4.248,7.668L10.613,3.425A2.5,2.5,0,0,1,13.387,3.425z M11.56,4.606L11.444,4.673 5.705,8.5 11.445,12.328A1,1,0,0,0,12.439,12.394L12.555,12.328 18.294,8.5 12.554,4.673A1,1,0,0,0,11.561,4.606z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="AboutIcon">
            <DrawingImage.Drawing>
                <DrawingGroup ClipGeometry="M0,0 V24 H24 V0 H0 Z">
                    <GeometryDrawing Brush="{DynamicResource TextFillColorPrimaryBrush}" Geometry="F1 M24,24z M0,0z M12,1.999C17.524,1.999 22.002,6.477 22.002,12.001 22.002,17.524 17.524,22.002 12,22.002 6.476,22.002 1.998,17.524 1.998,12.001 1.998,6.477 6.476,1.999 12,1.999z M12,3.499A8.502,8.502,0,1,0,12,20.502A8.502,8.502,0,0,0,12,3.5z M11.996,10.499A0.75,0.75,0,0,1,12.74,11.147L12.747,11.249 12.75,16.751A0.75,0.75,0,0,1,11.257,16.853L11.25,16.752 11.247,11.25A0.75,0.75,0,0,1,11.997,10.5z M12,7.003A0.999,0.999,0,1,1,12,9A0.999,0.999,0,0,1,12,7.003z" />
                </DrawingGroup>
            </DrawingImage.Drawing>
        </DrawingImage>
        <Style x:Key="FitToWindowButtonStyle"
               TargetType="Button"
               BasedOn="{StaticResource DefaultButtonStyle}">
            <Setter Property="Padding" Value="7,1,7,1"/>
            <Setter Property="HorizontalAlignment" Value="Right" />
        </Style>
        <Style x:Key="MenuBarButtonStyle"
           TargetType="Button"
           BasedOn="{StaticResource DefaultButtonStyle}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
        <Style x:Key="ZoomComboBoxStyle" 
               TargetType="ComboBox"
               BasedOn="{StaticResource DefaultComboBoxStyle}">
            <Setter Property="Padding" Value="5,4,5,4"/>
        </Style>
    </Window.Resources>

    <Grid ShowGridLines="{Binding ShowGridBorders}">
        <Grid.RowDefinitions>
            <RowDefinition Height="55"/>
            <RowDefinition Height="110"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="40"/>
        </Grid.RowDefinitions>
        <Border Grid.Row="1" Background="{DynamicResource CardBackgroundFillColorSecondaryBrush}" BorderThickness="2" BorderBrush="{DynamicResource ControlElevationBorderBrush}" Panel.ZIndex="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="100"/>
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="80"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" VerticalAlignment="Center" Orientation="Horizontal">
                        <Button Command="" Style="{StaticResource MenuBarButtonStyle}">
                            <Image Source="{StaticResource PasteIcon}" Width="30" Height="30"/>
                        </Button>
                        <Button Command="" Style="{StaticResource MenuBarButtonStyle}">
                            <Image Source="{StaticResource CopyIcon}" Width="30" Height="30"/>
                        </Button>
                        <Button Command="" Style="{StaticResource MenuBarButtonStyle}">
                            <Image Source="{StaticResource CutIcon}" Width="30" Height="30"/>
                        </Button>
                    </StackPanel>
                    <Grid Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Label Grid.Row="1" Content="Clipboard" Foreground="{DynamicResource TextFillColorTertiaryBrush}" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Grid>
                </Grid>
                <Separator Grid.Column="1" Margin="5,10,5,10" BorderThickness="1"/>
                <Grid Grid.Column="2">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="80"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" VerticalAlignment="Center" Orientation="Horizontal">
                        <Button Command="{Binding DrawingCanvasViewModel.SetRectSelectToolCommand}" Style="{StaticResource MenuBarButtonStyle}">
                            <Image Source="{StaticResource SelectionIcon}" Width="30" Height="30"/>
                        </Button>
                        <Button Command="" Style="{StaticResource MenuBarButtonStyle}">
                            <Image Source="{StaticResource CropIcon}" Width="30" Height="30"/>
                        </Button>
                        <Button Command="{Binding ShowResizeDialogCommand}" Style="{StaticResource MenuBarButtonStyle}">
                            <Image Source="{StaticResource ResizeIcon}" Width="30" Height="30"/>
                        </Button>
                    </StackPanel>
                    <Grid Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Label Grid.Row="1" Content="Image" Foreground="{DynamicResource TextFillColorTertiaryBrush}" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Grid>
                </Grid>
                <Grid Grid.Column="4">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="80"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Center" Orientation="Horizontal">
                        <Button Command="{Binding LayerViewModel.ToggleLayerControlVisibilityCommand}" Style="{StaticResource MenuBarButtonStyle}">
                            <Image Source="{StaticResource LayersIcon}" Width="30" Height="30"/>
                        </Button>
                    </StackPanel>
                    <Grid Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <Label Grid.Row="1" Content="Layer" Foreground="{DynamicResource TextFillColorTertiaryBrush}" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Grid>
                </Grid>
            </Grid>
        </Border>
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Menu Grid.Column="0" Panel.ZIndex="10" Background="{DynamicResource CardBackgroundFillColorSecondaryBrush}">
                <MenuItem Header="File">
                    <MenuItem Header="New" Command="{Binding NewCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource NewIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Open" Command="{Binding OpenCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource OpenIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Save" Command="{Binding SaveCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource SaveIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Save As">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource SaveAsIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                        <MenuItem Header="PNG" Command="{Binding SaveAsPNGCommand}"/>
                        <MenuItem Header="JPG" Command="{Binding SaveAsJPEGCommand}"/>
                        <MenuItem Header="BMP" Command="{Binding SaveAsBMPCommand}"/>
                    </MenuItem>
                    <MenuItem Header="Exit" Command="{Binding ExitCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource ExitIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                <MenuItem Header="Edit">
                    <MenuItem Header="Undo" Command="{Binding UndoCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource UndoIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Redo" Command="{Binding RedoCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource RedoIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Cut" Command="{Binding CutCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource CutIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Copy" Command="{Binding CopyCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource CopyIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Paste" Command="{Binding PasteCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource PasteIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                <MenuItem Header="View">
                    <MenuItem Header="Zoom In" Command="{Binding ZoomInCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource ZoomInIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Zoom Out" Command="{Binding ZoomOutCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource ZoomOutIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="Fit to Window" Command="{Binding ProjectManager.FitToWindowCommand}">
                        <MenuItem.Icon>
                            <Image Source="{StaticResource FitToWindowIcon}" Width="20" Height="20"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                <Separator Margin="0,5,0,5" BorderThickness="1"/>
                <MenuItem Command="{Binding SaveCommand}">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource SaveIcon}" Width="20" Height="20"/>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator Margin="0,5,0,5" BorderThickness="1"/>
                <MenuItem Command="{Binding UndoCommand}">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource UndoIcon}" Width="20" Height="20"/>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Command="{Binding RedoCommand}">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource RedoIcon}" Width="20" Height="20"/>
                    </MenuItem.Icon>
                </MenuItem>
            </Menu>
            <Menu Grid.Column="1"  Panel.ZIndex="10" FlowDirection="RightToLeft" Background="{DynamicResource CardBackgroundFillColorSecondaryBrush}">
                <MenuItem Command="{Binding ShowAboutDialogCommand}">
                    <MenuItem.Icon>
                        <Image Source="{StaticResource AboutIcon}" Width="20" Height="20"/>
                    </MenuItem.Icon>
                </MenuItem>
            </Menu>
        </Grid>
       

        <StatusBar Grid.Row="3" Panel.ZIndex="10" Padding="4" Background="{DynamicResource CardBackgroundFillColorSecondaryBrush}">
            <StatusBarItem Width="120" HorizontalAlignment="Left" VerticalAlignment="Center">
                <Grid x:Name="CursorInfo">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Image Grid.Column="0" Height="20" Source="{StaticResource CursorIcon}" Stretch="UniformToFill"/>
                    <TextBlock Margin="0,2,0,0" Grid.Column="2" Text="{Binding DrawingCanvasViewModel.MousePosOnCanvas}" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                </Grid>
            </StatusBarItem>
            <Separator Margin="5,2,5,2" BorderThickness="1"/>
            <StatusBarItem Width="120" HorizontalAlignment="Left" VerticalAlignment="Center">
                <Grid x:Name="SelectionInfo">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Image Grid.Column="0" Height="20" Source="{StaticResource SelectionIcon}" Stretch="UniformToFill"/>
                    <TextBlock Margin="0,2,0,0" Grid.Column="2" Text="{Binding DrawingCanvasViewModel.SelectionSize}" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                </Grid>
            </StatusBarItem>
            <Separator Margin="5,2,5,2" BorderThickness="1"/>
            <StatusBarItem Width="120" HorizontalAlignment="Left" VerticalAlignment="Center">
                <Grid x:Name="CanvasSizeInfo">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Image Grid.Column="0" Height="20" Source="{StaticResource CanvasSizeIcon}" Stretch="UniformToFill"/>
                    <TextBlock Margin="0,2,0,0" Grid.Column="2" Text="{Binding DrawingCanvasViewModel.CanvasSize}" Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                </Grid>
            </StatusBarItem>


            <StatusBarItem Width="380" HorizontalAlignment="Right" Height="40" VerticalAlignment="Center">
                <Grid x:Name="ZoomSlider">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="50"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Button Height="25" Width="40" Style="{StaticResource FitToWindowButtonStyle}" Command="{Binding ProjectManager.FitToWindowCommand}">
                        <Image Source="{StaticResource FitToWindowIcon}" VerticalAlignment="Center" Stretch="Uniform"/>
                    </Button>
                    <ComboBox   IsEditable="True"
                                Style="{StaticResource ZoomComboBoxStyle}" Grid.Column="2" Width="80"
                                ItemsSource="{Binding DrawingCanvasViewModel.ZoomPresets}"
                                Text="{Binding ProjectManager.ZoomFactor.Value, 
                                Converter={StaticResource ZoomValueConverter}, 
                                UpdateSourceTrigger=PropertyChanged}"/>
                    <Image Grid.Column="4" Source="/Resources/ZoomSliderDown.png" Width="20" Height="20" VerticalAlignment="Center" Stretch="UniformToFill"/>
                    <Slider Grid.Column="6" Width="150" Minimum="0.1" Maximum="8.0" Value="{Binding DrawingCanvasViewModel.ProjectManager.ZoomFactor.Value, Mode=TwoWay}"/>
                    <Image Grid.Column="8" Source="/Resources/ZoomSliderUp.png" Width="20" Height="20" VerticalAlignment="Center" Stretch="UniformToFill"/>
                </Grid>
            </StatusBarItem>
        </StatusBar>

        <uc:DrawingCanvas Panel.ZIndex="0" Grid.Row="2" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                            DataContext="{Binding DrawingCanvasViewModel}"/>

        <DockPanel Grid.Row="2">
            <uc:LayerControl Panel.ZIndex="10" HorizontalAlignment="Right" Margin="30" Grid.Row="1" Visibility="{Binding LayerControlVisibility}"
                                DataContext="{Binding LayerViewModel}" DockPanel.Dock="Right" VerticalAlignment="Stretch"/>

            <uc:ColorPaletteControl Panel.ZIndex="10" HorizontalAlignment="Left" Margin="30" VerticalAlignment="Top" Grid.Row="1"
                                DataContext="{Binding ColorPaletteViewModel}" DockPanel.Dock="Bottom"/>

            <uc:ToolboxControl Panel.ZIndex="10" HorizontalAlignment="Left" Margin="30" Grid.Row="1"
                               DataContext="{Binding ToolboxViewModel}" DockPanel.Dock="Left" VerticalAlignment="Center"/>
        </DockPanel>
        <Popup IsOpen="{Binding LayerViewModel.IsColorPickerOpen}"
           PlacementTarget="{Binding ElementName=ZoomSlider}" 
           Placement="Top" HorizontalOffset="-380" VerticalOffset="-13" AllowsTransparency="True"
           PopupAnimation="Fade">
            <Border Background="{DynamicResource CardBackgroundFillColorSecondaryBrush}"
                BorderBrush="{DynamicResource ControlElevationBorderBrush}" BorderThickness="2" 
                CornerRadius="15" Padding="10" Width="610">
                <StackPanel>
                    <uc:ColorPickerControl SelectedColor="{Binding Path=DataContext.LayerViewModel.BackgroundColor, 
                                                RelativeSource={RelativeSource FindAncestor, 
                                                AncestorType={x:Type local:MainCanvasWindow}},
                                                Mode=TwoWay}" Margin="0,0,0,-30" />
                    <Button HorizontalAlignment="Right" Content="Set color" Command="{Binding LayerViewModel.SetBackgroundColorCommand}"/>
                </StackPanel>
            </Border>
        </Popup>
    </Grid>
</Window>
